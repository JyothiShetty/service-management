<div class="incident-wrapper">
    <div class="incident-bg">
        <div class="incident-overlay">
            <mat-card class="form-card mat-elevation-z8">
                <mat-card-title>
                    <div class="d-flex justify-content-between align-items-center mb-2">
                        <h4 class="m-0 text-white">Service Request</h4>
                        <a mat-raised-button color="primary" [routerLink]="['/service-request']">
                            <mat-icon>arrow_back</mat-icon> Back
                        </a>
                    </div>
                </mat-card-title>

                <mat-divider></mat-divider>

                <mat-card-content>
                    <form #serviceForm="ngForm" (ngSubmit)="onSubmit(serviceForm)">
                        <div class="row mt-4">
                            <div class="col-md-4 col-xs-12">
                                <mat-form-field>
                                    <mat-label>Category</mat-label>
                                    <mat-select name="category" [(ngModel)]="formData.category">
                                        <mat-option value="software">Software Request</mat-option>
                                        <mat-option value="network">Network</mat-option>
                                        <mat-option value="servers">Servers</mat-option>
                                        <mat-option value="general">General</mat-option>
                                        <mat-option value="hardware-upgrade">Hardware Upgrade</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            <div class="col-md-4 col-xs-12">
                                <mat-form-field>
                                    <mat-label>Sub Category</mat-label>
                                    <mat-select name="subCategory" [(ngModel)]="formData.subCategory">
                                        <mat-option value="billable">Billable</mat-option>
                                        <mat-option value="non-billable">Non-Billable</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>

                        <div *ngIf="formData.category">
                            <mat-divider></mat-divider>
                            <div class="row mt-4">
                                <div class="col-md-3 col-xs-12">
                                    <mat-form-field>
                                        <mat-label>Department</mat-label>
                                        <mat-select name="department" [(ngModel)]="formData.department" required>
                                            <mat-option value="admin">Admin</mat-option>
                                            <mat-option value="itsg">ITSG</mat-option>
                                            <mat-option value="hr">HR</mat-option>
                                            <mat-option value="finance">Finance</mat-option>
                                            <mat-option value="bet-tools">BET Tools</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                                <div class="col-md-3 col-xs-12">
                                    <mat-form-field>
                                        <mat-label>Cubical Number</mat-label>
                                        <input type="tel" matInput name="cubicalNumber"
                                            [(ngModel)]="formData.cubicalNumber" required maxlength="15" />
                                    </mat-form-field>
                                </div>
                                <div class="col-md-3 col-xs-12">
                                    <mat-form-field>
                                        <mat-label>Contact Number</mat-label>
                                        <input type="tel" matInput name="contactNumber"
                                            [(ngModel)]="formData.contactNumber" required maxlength="15"
                                            minlength="10" />
                                    </mat-form-field>
                                </div>
                                <div class="col-md-3 col-xs-12">
                                    <mat-form-field>
                                        <mat-label>Extension Number</mat-label>
                                        <input type="number" matInput name="extensionNumber"
                                            [(ngModel)]="formData.extensionNumber" />
                                    </mat-form-field>
                                </div>

                                <div class="row">
                                    <div class="col-md-9 col-xs-12">
                                        <mat-form-field appearance="fill" class="w-100">
                                            <mat-label>Symptoms / Description</mat-label>
                                            <textarea matInput name="description" [(ngModel)]="formData.description"
                                                rows="3" required></textarea>
                                        </mat-form-field>
                                    </div>
                                    <div class="col-md-3 col-xs-12">
                                        <label for="fileUpload" class="form-label d-block mb-2">Attachment</label>
                                        <input type="file" id="fileUpload" (change)="onFileChange($event)" />
                                    </div>
                                </div>
                            </div>

                            <mat-divider></mat-divider>

                            <div class="row mt-4">
                                <div class="col-md-3 col-xs-12">
                                    <mat-form-field>
                                        <mat-label>Catalog Group</mat-label>
                                        <mat-select name="department" [(ngModel)]="formData.department">
                                            <mat-option value="admin">Admin</mat-option>
                                            <mat-option value="itsg">ITSG</mat-option>
                                            <mat-option value="hr">HR</mat-option>
                                            <mat-option value="finance">Finance</mat-option>
                                            <mat-option value="bet-tools">BET Tools</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                                <div class="col-md-3 col-xs-12">
                                    <mat-form-field>
                                        <mat-label>Catalog</mat-label>
                                        <mat-select name="workgroup" [(ngModel)]="formData.workgroup" required>
                                            <mat-option value="bangalore">Bangalore</mat-option>
                                            <mat-option value="chennai">Chennai</mat-option>
                                            <mat-option value="pune">Pune</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>
                                <div class="col-md-3 col-xs-12">
                                    <mat-form-field>
                                        <mat-label>Quality</mat-label>
                                        <input type="number" matInput name="quality" [(ngModel)]="formData.quality"
                                            required />
                                    </mat-form-field>
                                </div>
                                <div class="col-md-3 col-xs-12">
                                    <mat-form-field>
                                        <mat-label>Cost</mat-label>
                                        <input type="number" matInput name="cost" [(ngModel)]="formData.cost" />
                                    </mat-form-field>
                                </div>
                            </div>

                            <div class="d-flex justify-content-end mt-3">
                                <button mat-raised-button color="accent" type="submit" class="me-2">
                                    Submit
                                </button>
                                <button mat-raised-button color="warn" type="button" (click)="onCancel()">
                                    Cancel
                                </button>
                            </div>
                        </div>
                    </form>
                </mat-card-content>
            </mat-card>
        </div>
    </div>
</div>